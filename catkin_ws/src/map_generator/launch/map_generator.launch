<launch>
  <arg name="racetrack_image_path" default="$(find map_generator)/racetracks/track2.yaml"/>

  <node name="generate_map_yaml" pkg="map_generator" type="generate_map_yaml.py" output="screen">
    <param name="image_path" type="string" value="$(arg racetrack_image_path)"/>
  </node>

  <node name="map_server" pkg="map_server" type="map_server" args="$(arg racetrack_image_path)" />

  <node name="costmap_node" pkg="costmap_2d" type="costmap_2d_node">
      <rosparam file="$(find map_generator)/costmap/costmap.yaml" command="load" ns="costmap"/>
  </node>

  <node name="static_tf0" pkg="tf" type="static_transform_publisher" args="2 0 0 0 0 0 /map /base_link 100"/>

  <node pkg="move_base" type="move_base" respawn="false" name="move_base" output="screen">
    <rosparam file="$(find map_generator)/costmap/costmap.yaml" command="load" ns="local_costmap" />
    <rosparam file="$(find map_generator)/costmap/costmap.yaml" command="load" ns="global_costmap" />
    <rosparam file="$(find local_planning)/params/teb_planner_params.yaml" command="load" />

    <param name="base_local_planner" value="teb_local_planner/TebLocalPlannerROS" />
    <param name="controller_frequency" value="10.0" />
  </node>


</launch>

<!-- <launch>
  <arg name="racetrack_image_path" default="$(find map_generator)/racetracks/track2.png"/>

  <node name="map_generator_node" pkg="map_generator" type="map_generator_node" output="screen">
    <param name="image_path" type="string" value="$(arg racetrack_image_path)"/>
  </node>
</launch> -->
